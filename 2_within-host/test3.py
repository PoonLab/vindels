import re
def findChildren(node):
    #print(node)
    # finds the locations of all commas in the ancestral nodes
    commas = re.finditer(",",node)
    
    # saves all the end positions of the regex match objects
    idx = [x.end()-1 for x in commas]
    

    found = False
    i = 0

    # iterates through all comma positions until it finds the split point separating the two branches of the node 
    while found == False and i < len(idx):
        
        part1 = node[0:idx[i]]
        part2 = node[idx[i]+1:len(node)]

        left1 = len(re.findall("\(",part1))
        right1 = len(re.findall("\)", part1))

        # 1 and 2 refers to the two children of the node
        # left and right refer to the brackets that are being searched
        left2 = len(re.findall("\(",part2))
        right2 = len(re.findall("\)", part2))

        # left1 must be one higher than right1
        # right2 must be one higher than left2
        if left1 == right1+1 and left2+1 == right2:
            found = True
            #print(found)

            part1 = re.sub("^\({1}","",part1)
            part2 = re.sub(":[\d\.Ee-]+\)$","",part2)

            part1 = re.sub(":[\d\.Ee-]+$","",part1)
            return(part1, part2)
            
        i += 1
    return(None)


node = '''
((C.MW.2009.111847.MF500480.15.2_126:0.00895032,((C.MW.2009.111847.MF500528.15.2_188:0.00830864,C.MW.2009.111847.MF500517.15.2_188:0.00830864):0.0046936,C.MW.2009.111847.MF500516.15.2_188:0.0130022):0.00741596):0.026171,(C.MW.2009.111847.MF500494.15.2_126:0.0319889,(((C.MW.2009.111847.MF500498.15.2_126:0.0100283,(C.MW.2009.111847.MF500450.15.2_108:0.00179107,C.MW.2009.111847.MF500508.15.2_126:0.00512045):0.00490787):0.0189146,(C.MW.2009.111847.MF500345.15.2_12:0.00715855,(((((C.MW.2009.111847.MF500369.15.2_15:0.00177771,C.MW.2009.111847.MF500348.15.2_15:0.00177771):0.00165119,C.MW.2009.111847.MF500308.15.2_12:0.002874):0.00208064,(((C.MW.2009.111847.MF500325.15.2_12:0.00258983,(C.MW.2009.111847.MF500384.15.2_15:0.00193172,C.MW.2009.111847.MF500370.15.2_15:0.00193172):0.00121301):0.00134371,((((C.MW.2009.111847.MF500327.15.2_12:0.00029518,C.MW.2009.111847.MF500317.15.2_12:0.00029518):0.000634456,(C.MW.2009.111847.MF500349.15.2_15:0.000479918,C.MW.2009.111847.MF500382.15.2_15:0.000479918):0.00100462):0.000856229,C.MW.2009.111847.MF500319.15.2_12:0.00178586):0.0014836,(((C.MW.2009.111847.MF500355.15.2_15:0.00135245,(C.MW.2009.111847.MF500335.15.2_12:0.000258206,C.MW.2009.111847.MF500342.15.2_12:0.000258206):0.000539346):0.000934217,(C.MW.2009.111847.MF500362.15.2_15:0.00106764,C.MW.2009.111847.MF500334.15.2_12:0.000512745):0.00121902):0.00104123,((C.MW.2009.111847.MF500364.15.2_15:0.0018068,C.MW.2009.111847.MF500324.15.2_12:0.00125191):0.00101142,((C.MW.2009.111847.MF500344.15.2_12:0.00105126,C.MW.2009.111847.MF500371.15.2_15:0.00160616):0.000747005,((C.MW.2009.111847.MF500356.15.2_15:0.00127882,C.MW.2009.111847.MF500346.15.2_12:0.000723927):0.000467077,C.MW.2009.111847.MF500352.15.2_15:0.0017459):0.00060726):0.000465064):0.000509668):0.000496471):0.000664079):0.000615442,((C.MW.2009.111847.MF500338.15.2_12:0.00076792,C.MW.2009.111847.MF500347.15.2_12:0.00076792):0.00319412,((C.MW.2009.111847.MF500310.15.2_12:0.00228876,((C.MW.2009.111847.MF500315.15.2_12:0.0007178,(C.MW.2009.111847.MF500322.15.2_12:0.000229453,C.MW.2009.111847.MF500306.15.2_12:0.000229453):0.000488347):0.000742534,(C.MW.2009.111847.MF500336.15.2_12:0.000733484,(C.MW.2009.111847.MF500333.15.2_12:0.000248591,C.MW.2009.111847.MF500331.15.2_12:0.000248591):0.000484893):0.000726849):0.000828431):0.00119461,(C.MW.2009.111847.MF500343.15.2_12:0.00302193,(((C.MW.2009.111847.MF500316.15.2_12:0.0012503,(C.MW.2009.111847.MF500301.15.2_12:0.000648231,(C.MW.2009.111847.MF500375.15.2_15:0.000772715,C.MW.2009.111847.MF500309.15.2_12:0.000217818):0.000430413):0.000602064):0.000943105,((C.MW.2009.111847.MF500361.15.2_15:0.0019269,(((((C.MW.2009.111847.MF500337.15.2_12:0.000137262,(C.MW.2009.111847.MF500383.15.2_15:0.000322191,C.MW.2009.111847.MF500353.15.2_15:0.000322191):0.000369968):0.000178337,C.MW.2009.111847.MF500339.15.2_12:0.000315598):0.000218024,C.MW.2009.111847.MF500380.15.2_15:0.00108852):0.000271375,(C.MW.2009.111847.MF500311.15.2_12:0.000277776,C.MW.2009.111847.MF500307.15.2_12:0.000277776):0.000527221):0.000260698,C.MW.2009.111847.MF500358.15.2_15:0.00162059):0.000306305):0.000394764,(C.MW.2009.111847.MF500365.15.2_15:0.00112561,C.MW.2009.111847.MF500341.15.2_12:0.000570713):0.00119605):0.000426636):0.000443178,((C.MW.2009.111847.MF500326.15.2_12:0.00147324,((C.MW.2009.111847.MF500340.15.2_12:0.000784465,(C.MW.2009.111847.MF500304.15.2_12:0.000518974,(C.MW.2009.111847.MF500367.15.2_15:0.000853682,(C.MW.2009.111847.MF500354.15.2_15:0.000668922,C.MW.2009.111847.MF500332.15.2_12:0.000114025):0.00018476):0.000220189):0.000265492):0.00032543,(C.MW.2009.111847.MF500329.15.2_12:0.000390006,C.MW.2009.111847.MF500379.15.2_15:0.000944903):0.000719889):0.000363344):0.000516712,C.MW.2009.111847.MF500377.15.2_15:0.00254485):0.000646628):0.000385356):0.000461438):0.000478666):0.00058695):0.00040565):0.000448658,(C.MW.2009.111847.MF500359.15.2_15:0.00345269,C.MW.2009.111847.MF500323.15.2_12:0.00289779):0.00250551):0.000500616,C.MW.2009.111847.MF500314.15.2_12:0.00590391):0.00125464):0.000698297):0.000732119,((C.MW.2009.111847.MF500449.15.2_108:0.00740615,((C.MW.2009.111847.MF500471.15.2_126:0.00775648,((((C.MW.2009.111847.MF500469.15.2_126:0.00435495,C.MW.2009.111847.MF500457.15.2_108:0.00102557):0.00086136,(C.MW.2009.111847.MF500459.15.2_108:0.000995967,C.MW.2009.111847.MF500447.15.2_108:0.000995967):0.000890963):0.000871091,(C.MW.2009.111847.MF500456.15.2_108:0.00153116,((C.MW.2009.111847.MF500488.15.2_126:0.00359234,C.MW.2009.111847.MF500454.15.2_108:0.000262959):0.000497995,C.MW.2009.111847.MF500463.15.2_108:0.000760954):0.000770201):0.00122687):0.000979814,((C.MW.2009.111847.MF500479.15.2_126:0.00382833,C.MW.2009.111847.MF500458.15.2_108:0.00049895):0.00246047,(C.MW.2009.111847.MF500484.15.2_126:0.00402105,(C.MW.2009.111847.MF500489.15.2_126:0.0030486,(C.MW.2009.111847.MF500492.15.2_126:0.00239107,C.MW.2009.111847.MF500503.15.2_126:0.00239107):0.000657523):0.000972457):0.00226775):0.000778416):0.000689257):0.00207873,C.MW.2009.111847.MF500446.15.2_108:0.00650583):0.000900321):0.00144379,(C.MW.2009.111847.MF500443.15.2_108:0.000848325,C.MW.2009.111847.MF500442.15.2_108:0.000848325):0.00800161):0.0174957):0.00231384):0.00313246)
'''

output = findChildren(node)
print(output[0])
print(output[1])
